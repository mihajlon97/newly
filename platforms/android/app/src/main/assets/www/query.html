<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
<title>Newly | Search</title>
<link rel="stylesheet" type="text/css" href="styles/style.css">
<link rel="stylesheet" type="text/css" href="styles/framework.css">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
</head>

<body>
<!-- Preloader -->
<div id="preloader" class="preloader-bg">
	<h1></h1>
	<div id="preload-spinner"></div>
	<p>Hunt the truth!</p>
	<em>We will keep you informed</em>
</div>
	
<div id="page-transitions">
    <!-- Header -->
	<div id="header" class="header-home header-dark">
		<a href="#" class="queryName header-title back-button"></a>
		<a href="home.html" class="header-icon back-button header-icon-1 font-10 no-border"><i class="fa fa-chevron-left"></i></a>
	</div>

    <!-- Reading bar -->
	<div class="reading-bar"><div class="reading-line"></div></div>

	<div id="page-content" class="page-content page-content-gray">
		<div id="page-content-scroll">

			<div class="coverpage">
				<div id="cover-news" class="cover-slider owl-carousel owl-no-dots">
					<div id="coverinit" class="cover-item" style="background-image:url(images/pictures_vertical/bg1.jpg);">
						<div class="cover-content cover-content-bottom">
							<span class="cover-tag bg-red-dark">TRAVEL</span>
							<span class="cover-small-text opacity-40">April 27th, 2018</span>
							<h1 class="color-white left-text uppercase bold full-top no-bottom">The Big apple</h1>
							<p class="color-white font-11 quarter-bottom">New York in <a href="#">City News</a></p>
							<p class="color-white left-text opacity-40 no-bottom">Apple plans to purchase Empire State building, New York to literally become the "Big Apple"</p>
							<a href="#" class="half-top small-bottom font-12 color-gray-light float-left opacity-40">by New York Times</a>
							<a href="#" class="half-top small-bottom font-12 color-blue-dark float-right">Read More<i class="fa fa-angle-right icon-clear-left"></i></a>
						</div>
						<div class="cover-overlay overlay overlay-gradient"></div>

					</div>

				</div>
			</div>
			<div class="news-home">
				<h4 class="uppercase bold full-top small-bottom center-text"><i class="fa fa-angle-down color-blue-dark icon-clear-right"></i>Lovely news in <b class="queryName"></b></h4>
				<div id="query-news" class="double-slider owl-carousel owl-has-dots half-bottom">
					<div id="techinit" class="category-chosen"></div>
				</div>

				<div class="decoration decoration-margins"></div>
				<h5 class="uppercase bold half-top small-bottom center-text"><i class="fa fa-angle-right color-blue-dark icon-clear-right"></i>More articles in <b class="queryName"></b> </h5>

				<div class="decoration decoration-margins"></div>

			</div>

			<div class="decoration decoration-margins"></div>

			<h5 class="uppercase bold half-top small-bottom center-text"><i class="fa fa-angellist color-blue-dark icon-clear-right"></i>Newly's recommendation </h5>
			<div class="content content-boxed">
				<div id="relatedNews" class="single-slider owl-carousel owl-no-dots">
					<div class="related-news"></div>
				</div>
			</div>

			<div class="decoration decoration-margins"></div>

            <!-- Categories -->
			<div class="categories small-bottom">
				<a href="query.html?q=tech">	<strong></strong><em>Tech 			</em><span class="bg-black opacity-50"></span><img src="images/pictures/8s.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=health">	<strong></strong><em>Health 		</em><span class="bg-black opacity-50"></span><img src="images/pictures/5s.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=sport">	<strong></strong><em>Sports  		</em><span class="bg-black opacity-50"></span><img src="images/pictures/11.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=politics"><strong></strong><em>Politics 		</em><span class="bg-black opacity-50"></span><img src="images/pictures/12.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=economy">	<strong></strong><em>Economy 		</em><span class="bg-black opacity-50"></span><img src="images/pictures/13.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=science">	<strong></strong><em>Science 		</em><span class="bg-black opacity-50"></span><img src="images/pictures/14.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=travel">	<strong></strong><em>Travel 		</em><span class="bg-black opacity-50"></span><img src="images/pictures/6t.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=crypto">	<strong></strong><em>Crypto 		</em><span class="bg-black opacity-50"></span><img src="images/pictures/15.jpg" class="responsive-image" alt="img"></a>
				<a href="query.html?q=style">	<strong></strong><em>Style 			</em><span class="bg-black opacity-50"></span><img src="images/pictures/10s.jpg" class="responsive-image" alt="img"></a>
				<div class="clear"></div>
			</div>

			<div class="decoration decoration-margins"></div>

            <!-- Footer -->
			<div class="footer footer-dark">
				<a href="#" class="footer-logo"></a>
				<p>Hunt the truth! <br>All sources fetched from Newsapi.org</p>
			</div>

		</div>
	</div>
</div>
	<a href="#" class="back-to-top-badge back-to-top-small"><i class="fa fa-angle-up"></i>Back to Top</a>
</div>

<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
<script type="text/javascript" src="scripts/plugins.js"></script>

<script>
    /*

        All news are loaded with ajax requests on Newsapi.org and are actual and original.
        In success callback function is all content parsed in html.

        articleUrl is var for redirecting on clicked article - Redirection works perfectly.
        Slider is initialized when news are ready and appended to html

    */
    $(document).ready(function() {
        $('.queryName').html(getParameterByName('q').toUpperCase());

        //Get news from Newsapi.org for requested keyword
        $.ajax({
            url: "https://newsapi.org/v2/top-headlines?q="+getParameterByName('q')+"&language=en&apiKey=cc078c1c3a974f6dac7177de0a89e7a5",
            success: function(result){
                var articleUrl;
				var h = $('#cover-news').height();
				var w = $('#cover-news').width();
                result.articles.forEach(function (el) {
                    articleUrl = encodeURI(`article.html?title=${el.title}&desc=${el.description}&photo=${el.urlToImage}&src=${el.source.id}&cat=Breaking&url=${el.url}&time=${el.publishedAt.substring(0,10)}`);
                    if(el.urlToImage != null)
                    	$('#cover-news').append(`<div class="cover-item" style="background-image:url('${el.urlToImage}'); height: ${h}px; width: ${w}px;"><div class="cover-content cover-content-bottom"><span class="cover-tag bg-red-dark">Breaking</span><span class="cover-small-text opacity-40">${el.publishedAt.substring(0,10)}</span><h1 class="color-white left-text uppercase bold half-top no-bottom">${el.title}</h1><p class="color-white font-11 quarter-bottom"><a href="#"></a></p><p class="color-white left-text opacity-40 no-bottom">${el.description}</p><a href="#" class="half-top small-bottom font-12 color-gray-light float-left opacity-40">by ${el.source.name}</a><a href="${articleUrl}" class="half-top small-bottom font-12 color-blue-dark float-right">Read More<i class="fa fa-angle-right icon-clear-left"></i></a></div><div class="cover-overlay overlay overlay-gradient"></div></div>`);
                });

                $('.cover-slider').owlCarousel({loop:true, nav:false, items:1, autoplay: true, autoplayTimeout:3500});
                $('.cover-slider').trigger('remove.owl.carousel', 0).trigger('refresh.owl.carousel');;
                setTimeout(function(){$("#preloader").addClass('hide-preloader');},250);
                $('#preloader').addClass('hide-objects');
                $('body').prepend('<div class="page-change-preloader preloader-bg"><div id="preload-spinner"></div></div>');

            }
    	});

        //Get more news from Newsapi.org for requested keyword
        $.ajax({
            url: "https://newsapi.org/v2/top-headlines?language=en&q="+ getParameterByName('q') +"&apiKey=cc078c1c3a974f6dac7177de0a89e7a5",
            success: function(result){
                var articleUrl;
                shuffle(result.articles);
                result.articles.forEach(function (el) {
                    articleUrl = encodeURI(`article.html?title=${el.title}&desc=${el.description}&photo=${el.urlToImage}&src=${el.source.id}&cat=Breaking&url=${el.url}&time=${el.publishedAt.substring(0,10)}`);
                    if(el.urlToImage != null)
                        $('#query-news').append(`<div class="category-chosen"><a href="${articleUrl}"><img src="${el.urlToImage}" alt="img"></a><span class="small-top color-green-dark">${el.source.name}</span><strong>${el.title}</strong><em>${el.description}</em></div>`);
                });
                $('#query-news').owlCarousel({loop:true, margin:20, nav:false, autoHeight:true, items:2, autoplay: true, autoplayTimeout:3500});
                $('#query-news').trigger('remove.owl.carousel', 0).trigger('refresh.owl.carousel');;
            }
        });

        //Get news from Newsapi.org for requested keyword
        $.ajax({
            url: "https://newsapi.org/v2/top-headlines?language=en&q="+ getParameterByName('q') +"&apiKey=cc078c1c3a974f6dac7177de0a89e7a5",
            success: function(result){
                var articleUrl;
                shuffle(result.articles);
                result.articles.forEach(function (el) {
                    articleUrl = encodeURI(`article.html?title=${el.title}&desc=${el.description}&photo=${el.urlToImage}&src=${el.source.id}&cat=Breaking&url=${el.url}&time=${el.publishedAt.substring(0,10)}`);
                    if(el.urlToImage != null && result.articles.indexOf(el) < 6)
                        $('.news-home').append(`<div class="article-card box-shadow bg-white full-bottom"><a href="${articleUrl}" class="article-header"><span class="article-overlay"></span><img class="article-image" src="${el.urlToImage}"/><span class="article-category bg-red-dark color-white uppercase">${getParameterByName('q').toUpperCase()}</span><span class="article-author color-gray-light"><i class="fa fa-user opacity-50"></i>${el.source.name}</span><span class="article-time color-gray-light">${el.publishedAt.substring(0,10)}<i class="fa fa-clock-o opacity-50"></i></span></a><div class="article-content"><h1 class="article-title half-top">${el.title}</h1><p class="small-bottom">${el.description}</p><a href="${articleUrl}" class="half-bottom right-text">Read more <i class="fa fa-angle-right icon-clear-left icon-clear-right"></i></a></div></div>`);
                });
            }
        });


        //Get Related from Newsapi.org for requested keyword
        $.ajax({
            url: "https://newsapi.org/v2/top-headlines?language=en&q="+ getParameterByName('q') +"&apiKey=cc078c1c3a974f6dac7177de0a89e7a5",
            success: function(result){
                var articleUrl;
                shuffle(result.articles);
                result.articles.forEach(function (el) {
                    articleUrl = encodeURI(`article.html?title=${el.title}&desc=${el.description}&photo=${el.urlToImage}&src=${el.source.id}&cat=Breaking&url=${el.url}&time=${el.publishedAt.substring(0,10)}`);
                    if(el.urlToImage != null && result.articles.indexOf(el) < 6)
                        $('#relatedNews').append(`<div class="related-news"><a href="${articleUrl}" class="related-news-image"><img src="${el.urlToImage}"></a><div class="store-slide-title"><strong>${el.title}</strong><em class="color-gray-dark">${el.description}</em></div><div class="store-slide-button"><strong>${el.source.name}</strong><a href="${articleUrl}"><i class="fa fa-arrow-right color-blue-light"></i>Read more</a></div></div>`);
                });
                $('#relatedNews').owlCarousel({loop:true, margin:0, nav:false, autoHeight:true, items:1, autoplay: true, autoplayTimeout:3500});
                $('#relatedNews').trigger('remove.owl.carousel', 0).trigger('refresh.owl.carousel');;
            }
        });
    });
</script>

</body>